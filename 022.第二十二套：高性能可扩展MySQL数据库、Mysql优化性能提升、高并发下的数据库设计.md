#高性能可扩展MySQL数据库、Mysql优化性能提升、高并发下的数据库设计

#第1章 实例和故事
##传统架构
master(1台) -> slaves(14台)

存在的问题：当master挂掉的时候，需要手动调整slave为mater

##mysql性能指标
QTS，TPS，并发量，CPU使用率，同时连接数，磁盘IO

注：fashion IO的设备
尽量不要在主库上做数据备份

##影响数据库性能的因素
sql查询速度，服务器硬件配置，网卡流量，磁盘IO

**大量的并发：** 

* 数据库连接数被占满(max_connetions默认为100)

**超高的CPU使用率**  

* 因CPU耗尽而出现宕机

**磁盘IO** 

* 磁盘IO性能突然下降(使用更快的磁盘设备)
* 其他大量消耗磁盘性能的计划任务(调整计划任务，做好磁盘保护)

**网卡流量**

* 网卡IO会被占满
* 减少从服务器的数量
* 进行分级缓存
* 避免使用“select *”进行查询
* 分离业务网络和服务器网络

**大表带来的问题**

* 记录超过1千万行
* 表数据文件巨大，查过10G 
* 慢查询: 很难在一定时间内过滤出需要的数据
* 对DDL操作的影响(建立索引需要很长时间)
 
##如何处理数据库中的大表

**分库分表** 难点:

>  分表主键的选择  
>  分表后跨分区数据的查询和统计  
>  大表的历史数据归档 减少对前后端业务的影响
>> 归档时间点的选择  
>> 如何进行归档

**大事务带来的问题**
 
> 事务具有原子性，是一个独立的单元   
> 原子性，一致性，隔离性，持久性   
> 运行时锁定太多的数据，造成大量的阻塞和锁超时   
> 回滚时所需的时间比较长   
> 执行时间长，造成主从延迟严重

###如何处理大事务

* 避免一次处理太多的数据
* 移除事务中不必要的select的操作

#第2章 什么影响了MySQL性能
##影响性能的几个方面

CPU，内存，磁盘IO，服务器使用的操作系统

